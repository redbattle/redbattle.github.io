---
title: 通过 Docker 和 NGrock 内网穿透实现互联网访问树莓派 Web 环境
date: 2022-10-02 16:08:29
permalink: /pages/3b3875/
categories:
  - env
tags:
  -
---

### 树莓派系统

- 下载树莓派烧录软件 `Raspberry Pi Imager` 并安装
  ```
  https://www.raspberrypi.com/software/
  ```

- 将 sd 卡插入电脑，打开烧录软件选择需要的系统版本和 sd 卡，并配置好 WiFi 和 ssh 访问
  ```
  # 没有WiFi通过网线也可以

  # 找到树莓派的ip

  # 开启ssh访问：在boot根目录创建ssh文件（连接需关闭vpn）
  ssh <user>@<ip>

  # 烧录完后手动格式化未用的新分区
  ```
  
  > Raspbian 系统默认用户名：pi，密码：raspberry

- 安装软件
  ```
  # 更新索引源
  sudo apt-get update

  sudo apt-get install vim
  ```

- 设置 dhcpcd
  ```
  sudo vim /etc/dhcpcd.conf

  # 路由器/网关IP地址
  static routers

  # 手动自定义DNS服务器
  static domain_name_servers=114.114.114.114

  # 重启树莓派生效
  sudo reboot
  ```

- 修改软件源
  ```
  sudo nano /etc/apt/sources.list

  deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi

  deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi
  ```

### Docker

- 安装 dcoker
  ```
  sudo curl -sSL https://get.docker.com | sh
  ```

- 将当前用户加入 docker 组，退出当前终端并重新登录，此时操作 docker 不再需要加 sudo 权限
  ```
  sudo usermod -aG docker $USER
  ```
- 安装 docker-compose

  ```
  # 1，通过 pip 安装
  sudo pip install docker-compose

  # 2，直接下载相应程序安装
  sudo curl -L "https://github.com/docker/compose/releases/download/v2.11.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose

  sudo chmod +x /usr/local/bin/docker-compose

  # 查看系统版本
  uname -s
  uname -m

  # 通过连接找到相对应的包
  https://github.com/docker/compose/releases
  ```

- Dockerfile 文件
  ```
  
  ```

### 安装 NGrock
