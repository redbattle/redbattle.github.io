---
title: 方案
date: 2022-01-21 16:36:59
permalink: /pages/408e3f/
categories:
  - knowledge
tags:
  - 
---

- 中间层方案
- 首屏性能替身方案
- 数据埋点方案
- 长列表无限滚定方案
- api接口鉴权方案
    ```
    - axios请求拦截器
    - 路由守卫判断
    - 菜单权限控制，vue addRoutes。返回菜单列表或接口控制
    ```
- 单点登录
    ```
    - 在某一处登录，关联的其他网站也会登录
    - 如果是子域名不同，主域名相同的网站，可以将验证token存放在主域名下的cookie上，请求时直接用主域名下的token进行校验
    - 如果主域名不同，需要建立一个鉴权中心，所有的网站登录校验都在鉴权中心进行验证
    ```
- 移动端Retina屏boder 1px显示为2px或3px的解决方法
    ```
    - CSS解决，transform: scaleX(0.5)
    - viewport+js，initial-scale=0.5, maximum-scale=0.5
    ```
- 性能优化
    ```
    - 图片懒加载。初始不设置src，将data数据存在data-src里，等滚动到当前图片时再将data-src的值赋值给src
    - 字体图标和背景雪碧图
    - 减少资源文件的请求次数，1通过Nginx服务器进行资源文件合并combo，2通过Webpack进行物理打包，3小图片转码成base64可以减少资源请求次数
    - 组件通过babel插件按需动态加载
    - spa路由懒加载
    - 将依赖库挂到CDN上，因为http发送tcp协议有限制，对于同一个域名，大多数浏览器允许同时建立6个持久连接
    - 使用http2协议，实现多路复用
    - 对静态资源进行混淆、压缩
    - 服务器启用Gzip压缩
    - 关键点：
        - 减少http请求次数
        - 减少dns查询
        - 使用cdn
        - 图片懒加载
        - 避免重定向
        - 减少dom操作
        - 压缩合并静态资源
        - 减少iframe使用
        - css放在link中，不使用import
        - js文件放在底部
    ```
- 渲染优化
    ```
    - 不使用iframe
        - 搜索引擎不会检索iframe页面，不利于SEO
        - iframe会阻塞主页面的onload事件
        - iframe共享主页面的连接池，浏览器对同域连接池有限，会影响页面并行加载
        - 通过js动态给ifamre添加src属性可以避免以上两个问题
    - 使用css3代替js动画，尽可能避免重绘重排
    - 小图用base64编码，减少网络请求
    - css文件放在head里，不要用@import导入（link在页面加载的时候就会加载；import会等待页面资源加载完成后再加载，性能略差。），避免使用滤镜，合理
    ```
- 打包优化
    ```
    - 开发环境启用增量构建，启用热更新
    - 配置devtool
    - 选择合适的loader，个别loader开启cache
    - 第三方库采用引人方式
    - 提取公共代码
    - 优化搜索时的构建路径，指明需要构建目录和不需要构建目录
    - 模块化引入需要的部分
    ```
- web会话跟踪方法
    ```
    - 当用户在同一网站的多个页面之间转换时，无法确定是否是同一个客户，会话跟踪技术就可以解决这个问题
    - session
    - cookie
    - URL重写
    - 隐藏的input
    ```
- 预加载
- 预渲染